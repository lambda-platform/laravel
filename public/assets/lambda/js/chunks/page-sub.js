"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[17],{13741:(i,t,e)=>{e.r(t),e.d(t,{default:()=>r});const s={data:()=>({pageType:"",menu:window.init.menu,cruds:window.init.cruds,permissions:window.init.permissions.permissions,property:{withCrudLog:window.init.withCrudLog,withoutHeader:!0===window.init.withoutHeader,page_id:null,template:"canvas",mode:window.init.crud_mode?window.init.crud_mode:void 0,title:"",grid:null,form:null,form_width:null,view_url:null,actions:[],user_condition:null,permissions:{c:!1,r:!1,u:!1,d:!1}},iframeUrl:"",submenu:[],showSub:!1}),methods:{getPage(){let i=this.menu.findIndex((i=>i.id==this.$route.params.menu_id));if(i>=0){let t=this.menu[i].children.findIndex((i=>i.id==this.$route.params.sub_menu_id));if(t>=0){let e=this.menu[i].children[t];if(this.pageType=e.link_to,"crud"==this.pageType){let i=this.cruds.findIndex((i=>i.id==e.url));if(i>=0){this.property.page_id=e.id,this.property.title=this.cruds[i].title,this.property.grid=this.cruds[i].grid,this.property.form=this.cruds[i].form,this.property.view_url=this.cruds[i].view_url,this.property.permissions.c=this.permissions[e.id].c,this.property.permissions.r=this.permissions[e.id].r,this.property.permissions.u=this.permissions[e.id].u,this.property.permissions.d=this.permissions[e.id].d;let t={};this.permissions[e.id].formCondition&&(t.formCondition=this.permissions[e.id].formCondition),this.permissions[e.id].gridCondition&&(t.gridCondition=this.permissions[e.id].gridCondition),t&&(this.property.user_condition=t)}}else"iframe"==this.pageType&&(this.iframeUrl=e.url)}}},checkSub(){let i=this.menu.findIndex((i=>i.id==this.$route.params.menu_id));if(i>=0){let t=this.menu[i].children.findIndex((i=>i.id==this.$route.params.sub_menu_id));if(t>=0)if(this.menu[i].children[t].children.length>=1)if(this.$route.matched.length<=2){let e=this.getShowAbleChild(this.menu[i].children[t].children);e&&this.$router.push(`/p/${this.$route.params.menu_id}/${this.$route.params.sub_menu_id}/${e.id}`)}else this.subMenu=this.menu[i].children[t].children,this.showSub=!0;else this.showSub=!1,this.getPage();else this.showSub=!1,this.getPage()}},getShowAbleChild(i){let t=i.findIndex((i=>this.can(i)));return t>=0?i[t]:null},getTitle(i){if("crud"==i.link_to){let t=this.cruds.findIndex((t=>t.id==i.url));return t>=0?this.cruds[t].title:""}return i.title},can(i){return!!this.permissions[i.id]&&!!this.permissions[i.id].show}},mounted(){this.checkSub()}};const r=(0,e(51900).Z)(s,(function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",[i.showSub?e("div",[e("router-view",{key:i.$route.path},[e("template",{slot:"nav"},[i._t("nav")],2),i._v(" "),e("template",{slot:"v-nav"},[i._t("v-nav")],2)],2)],1):i._e(),i._v(" "),i.showSub?i._e():e("div",{class:(i.pageType,"")},["crud"==i.pageType?e("krud",{staticClass:"material",attrs:{template:i.property.template,property:i.property}},[e("template",{slot:"nav"},[i._t("nav")],2),i._v(" "),e("template",{slot:"v-nav"},[i._t("v-nav")],2),i._v(" "),e("user-control",{attrs:{slot:"right"},slot:"right"})],2):i._e(),i._v(" "),"iframe"==i.pageType?e("div",{staticClass:"material"},[e("section",{staticClass:"offcanvas-template"},[e("div",{staticClass:"crud-page"},[i._m(0),i._v(" "),e("div",{staticClass:"crud-page-body"},[e("div",{staticClass:"v-nav"},[i._t("v-nav")],2),i._v(" "),e("div",{staticClass:"dg-flex"},[e("div",{staticClass:"iframe-page"},["iframe"==i.pageType?e("iframe",{attrs:{src:i.iframeUrl}}):i._e()])])])])])]):i._e()],1)])}),[function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"crud-page-header"},[t("h3")])}],!1,null,null,null).exports},51900:(i,t,e)=>{function s(i,t,e,s,r,n,o,d){var a,l="function"==typeof i?i.options:i;if(t&&(l.render=t,l.staticRenderFns=e,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),o?(a=function(i){(i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(i=__VUE_SSR_CONTEXT__),r&&r.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(o)},l._ssrRegister=a):r&&(a=d?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),a)if(l.functional){l._injectStyles=a;var u=l.render;l.render=function(i,t){return a.call(t),u(i,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,a):[a]}return{exports:i,options:l}}e.d(t,{Z:()=>s})}}]);