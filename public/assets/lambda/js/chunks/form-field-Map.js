"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9737],{3359:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});const n={props:["model","rule","label","meta"],data:()=>({map:null,center:{lat:47.9197668,lng:106.9183483},zoom:11,marker:null,fromCityCenter:0}),computed:{coordinate(){return this.model.form[this.model.component]}},watch:{coordinate(t,e){if((e&&!t||t&&!e)&&t){let e=JSON.parse(t);this.center={lat:parseFloat(e.lat),lng:parseFloat(e.lng)},this.init()}}},mounted(){this.init()},methods:{init(){this.map=new google.maps.Map(this.$el.getElementsByClassName("lambda-map")[0],{zoom:this.zoom,center:this.center}),this.marker=new google.maps.Marker({map:this.map,draggable:!0,animation:google.maps.Animation.DROP,position:this.center}),google.maps.event.addListener(this.map,"click",(t=>{this.model.form[this.model.component]=JSON.stringify(t.latLng),this.marker.setPosition(t.latLng)})),this.marker.addListener("position_changed",this.moveEvent.bind(this))},calcDistance(t,e){let a=47.91854,n=.017453292519943295,s=Math.cos,l=.5-s((t-a)*n)/2+s(a*n)*s(t*n)*(1-s((e-106.917658)*n))/2;this.fromCityCenter=(12742*Math.asin(Math.sqrt(l))).toFixed(2)},moveEvent(){this.center={lat:this.marker.getPosition().lat().toFixed(7),lng:this.marker.getPosition().lng().toFixed(7)},this.calcDistance(this.center.lat,this.center.lng);new google.maps.LatLng(this.center.lat,this.center.lng);this.model.form[this.model.component]=JSON.stringify(this.center)},updateLat(t){this.center.lat=parseFloat(t.target.value).toFixed(7);let e=new google.maps.LatLng(this.center.lat,this.center.lng);this.marker.setPosition(e)},updateLng(t){this.center.lng=parseFloat(t.target.value).toFixed(7);let e=new google.maps.LatLng(this.center.lat,this.center.lng);this.marker.setPosition(e)}}};const s=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lambda-map-wrapper"},[a("FormItem",{attrs:{label:t.label,prop:t.rule}},[a("div",{staticClass:"lambda-lat-lng"},[a("Input",{attrs:{placeholder:"Latitude"},on:{"on-blur":t.updateLat},model:{value:t.center.lat,callback:function(e){t.$set(t.center,"lat",e)},expression:"center.lat"}}),t._v(" "),a("Input",{attrs:{placeholder:"Longitude"},model:{value:t.center.lng,callback:function(e){t.$set(t.center,"lng",e)},expression:"center.lng"}})],1),t._v(" "),a("span",[t._v("Хотын төвөөс: "+t._s(t.fromCityCenter)+" км")]),t._v(" "),a("div",{staticClass:"lambda-map"})])],1)}),[],!1,null,null,null).exports}}]);